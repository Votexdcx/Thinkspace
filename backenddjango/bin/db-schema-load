#!/usr/bin/env bash
# ^ Always include this at the top so the system knows it's a bash script

# Get full path to schema.sql file
schema_path="$(realpath .)/db/schema.sql"

# Check if first argument ($1) is "prod"
if [ "$1" = "prod" ]; then
  echo "Environment: prod"
  URL=$PROD_CONNECTION_URL
else
  echo "Environment: dev/test"
  URL=$CONNECTION_URL
fi

# Debugging output (optional)
echo "Using URL: $URL"
echo "Schema path: $schema_path"

# Run the SQL file against the database
psql "$URL" -f "$schema_path"
